<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Drink Recipes</title>
<style>
html, body {
  height: 100%;
  margin: 0;
  font-family: system-ui, sans-serif;
  color: white;
  text-align: center;
  overflow: hidden; /* prevent scrollbars */
}

/* Full-screen background image */
#background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('Image.png'); /* replace with your image path */
  background-size: cover;
  background-position: center;
  z-index: 0; /* behind all content */
}

/* Container for carousel and recipe */
#container {
  position: relative;
  z-index: 1; /* on top of background */
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  margin-top: 25vh; /* start 25% down the page */

  #background-color: #333;
  #background-color: #333;
  #background-color: rgb(144, 158, 166);
  width: 320px;
  height: 320px;
  border-radius: 8px;
  left: 66.66%;       /* 2/3rds across the page horizontally */
  transform: translateX(-50%); /* center the container relative to its left position */
  #opacity: 0.35; /* hidden by default */
}

h1 {
  margin-bottom: 20px;
  font-size: 2rem;
  color: rgb(149, 224, 111);
}

#carouselContainer {
  width: 320px;
  height: 80px;
  position: relative;
  margin-bottom: 20px;
}

.drinkItem {
  width: 300px;
  height: 60px;
  #background-color: rgba(0,0,0,0.6); /* semi-transparent black */
  #color: white;
  color: rgb(136,60,31);
  border-radius: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2rem;
  cursor: pointer;
  white-space: nowrap;
  transition: background-color 0.3s ease;
  #text-transform: uppercase; /* uppercase names */
  text-transform: capitalize;
}

.drinkItem:hover {
  background-color: rgba(0,0,0,0.0); /* transparent on hover */
}

#recipe {
  margin-top: 10px;
  padding: 15px;
  #background: rgba(0,0,0,0.6); /* semi-transparent black */
  border-radius: 10px;
  min-width: 300px;
  max-width: 90%;
  box-shadow: 0 4px 10px rgba(255,255,255,0.1);
  text-align: center;
  opacity: 0; /* hidden by default */
  transition: opacity 0.3s ease;
  #color: white;
  #color: rgb(136,60,31);
  text-transform: capitalize;
  font-size: 1.5rem;
}

#recipe.show {
  opacity: 1;
}

#recipe ul {
  list-style: none; /* remove bullets */
  padding-left: 0;  /* remove default indentation */
  text-align: center; /* center list items */
  #color: rgb(136,60,31);
}

#recipe ul li {
  margin-bottom: 0.3rem;
  color: white;
}
</style>
</head>
<body>
<!-- Full-page background -->
<div id="background"></div>

<!-- Foreground container -->
<div id="container">
  <h1>Drink Recipes</h1>

  <div id="carouselContainer"></div>

  <div id="recipe"></div>
</div>

<script>
async function loadDrinks() {
  try {
    const response = await fetch(`${window.location.origin}/api/receipes`)
    //const response = await fetch('https://:/api/receipes');
    const data = await response.json();

    const drinkNames = Object.keys(data);
    const carousel = document.getElementById('carouselContainer');
    const recipeBox = document.getElementById('recipe');

    let index = 0;
    let currentDrinkDiv = null;
    let carouselInterval;

    function showDrink(idx) {
      // Remove previous drink element if exists
      if (currentDrinkDiv) {
        currentDrinkDiv.remove();
      }

      const drinkName = drinkNames[idx];
      const div = document.createElement('div');
      div.className = 'drinkItem';
      div.textContent = drinkName;

      // Hover shows recipe
      div.addEventListener('mouseenter', () => {
        const recipeHTML = `<ul>` +
          Object.entries(data[drinkName])
                .map(([ing, amt]) => `<li><strong>${ing}</strong>: ${amt}</li>`)
                .join('') +
          `</ul>`;
        recipeBox.innerHTML = recipeHTML;
        recipeBox.classList.add('show');

        // Pause carousel
        clearInterval(carouselInterval);
      });

      div.addEventListener('mouseleave', () => {
        recipeBox.classList.remove('show');

        // Resume carousel
        carouselInterval = setInterval(() => {
          index = (index + 1) % drinkNames.length;
          showDrink(index);
        }, 3000);
      });

      carousel.appendChild(div);
      currentDrinkDiv = div;
    }

    // Show first drink
    showDrink(index);

    // Start carousel
    carouselInterval = setInterval(() => {
      index = (index + 1) % drinkNames.length;
      showDrink(index);
    }, 3000);

  } catch (err) {
    console.error('Error loading drinks:', err);
  }
}

window.onload = loadDrinks;
</script>
</body>
</html>
